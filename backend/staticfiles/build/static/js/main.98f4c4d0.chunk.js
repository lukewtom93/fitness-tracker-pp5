(this.webpackJsonpmoments=this.webpackJsonpmoments||[]).push([[0],{23:function(e,t,c){},43:function(e,t,c){},46:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c.n(s),n=c(16),r=c.n(n),o=(c(23),c(2)),l=c(5),j=c(17);const i="access",b="refresh",d=c.n(j).a.create({baseURL:"/api"});d.interceptors.request.use((e=>{const t=localStorage.getItem(i);return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e)));var h=d,u=(c(43),c(3));var O=()=>Object(u.jsx)("div",{className:"loading-containerr",children:Object(u.jsx)("div",{className:"loader"})});var m=function(e){let{route:t,method:c}=e;const[a,n]=Object(s.useState)(""),[r,l]=Object(s.useState)(""),[j,d]=Object(s.useState)(!1),m=Object(o.o)(),x="login"===c?"Login":"Register";return Object(u.jsxs)("form",{onSubmit:async e=>{d(!0),e.preventDefault();try{const e=await h.post(t,{username:a,password:r});"login"===c?(localStorage.setItem(i,e.data.access),localStorage.setItem(b,e.data.refresh),m("/")):m("/login")}catch(s){alert(s)}finally{d(!1)}},className:"form-container",children:[Object(u.jsx)("h1",{children:x}),Object(u.jsx)("input",{className:"form-input",type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"Username"}),Object(u.jsx)("input",{className:"form-input",type:"password",value:r,onChange:e=>l(e.target.value),placeholder:"Password"}),j&&Object(u.jsx)(O,{}),Object(u.jsx)("button",{className:"form-button",type:"submit",children:x})]})};var x=function(){return Object(u.jsx)(m,{route:"/api/token/",method:"login"})};var g=function(){return Object(u.jsx)(m,{route:"/api/profile/register/",method:"register"})};c(45);var p=function(){const[e,t]=Object(s.useState)(null),[c,a]=Object(s.useState)(!0),[n,r]=Object(s.useState)([]),[o,l]=Object(s.useState)(""),[j,i]=Object(s.useState)("");Object(s.useEffect)((()=>{(async()=>{try{const e=await fetch("/api/data");if(!e.ok)throw new Error("Network response was not ok");const c=await e.json();t(c)}catch(e){console.error("Error fetching data:",e)}finally{a(!1)}})()}),[]);const b=n.reduce(((e,t)=>e+t.calories),0);return c?Object(u.jsx)("div",{children:"Loading..."}):Object(u.jsxs)("div",{className:"container mt-5",children:[Object(u.jsx)("h1",{className:"text-center mb-4",children:"Calorie Tracker"}),Object(u.jsx)("div",{className:"card p-4 mb-4",children:Object(u.jsxs)("div",{className:"row g-3",children:[Object(u.jsx)("div",{className:"col-md-6",children:Object(u.jsx)("input",{type:"text",className:"form-control",placeholder:"Food Item",value:o,onChange:e=>l(e.target.value)})}),Object(u.jsx)("div",{className:"col-md-4",children:Object(u.jsx)("input",{type:"number",className:"form-control",placeholder:"Calories",value:j,onChange:e=>i(e.target.value)})}),Object(u.jsx)("div",{className:"col-md-2",children:Object(u.jsx)("button",{className:"btn btn-primary w-100",onClick:()=>{o&&j&&(r([...n,{food:o,calories:parseInt(j)}]),l(""),i(""))},children:"Add"})})]})}),Object(u.jsxs)("div",{className:"card p-4",children:[Object(u.jsx)("h3",{className:"mb-3",children:"Calorie Entries"}),n.length>0?Object(u.jsxs)("table",{className:"table table-striped",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"#"}),Object(u.jsx)("th",{children:"Food"}),Object(u.jsx)("th",{children:"Calories"}),Object(u.jsx)("th",{children:"Actions"})]})}),Object(u.jsx)("tbody",{children:n.map(((e,t)=>Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t+1}),Object(u.jsx)("td",{children:e.food}),Object(u.jsx)("td",{children:e.calories}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>(e=>{const t=n.filter(((t,c)=>c!==e));r(t)})(t),children:"Delete"})})]},t)))})]}):Object(u.jsx)("p",{className:"text-muted",children:"No entries yet. Add some food items!"})]}),Object(u.jsx)("div",{className:"mt-4 text-center",children:Object(u.jsxs)("h4",{children:["Total Calories: ",b]})})]})};var f=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"404 Not Found"}),Object(u.jsx)("p",{children:"The page you're looking for doesn't exist!"})]})},v=c(18);var N=function(e){let{children:t}=e;const[c,a]=Object(s.useState)(null),n=Object(s.useCallback)((async()=>{const e=localStorage.getItem(b);try{const t=await h.post("/api/token/refresh/",{refresh:e});200===t.status?(localStorage.setItem(i,t.data.access),a(!0)):a(!1)}catch(t){console.log(t),a(!1)}}),[]),r=Object(s.useCallback)((async()=>{const e=localStorage.getItem(i);if(!e)return void a(!1);Object(v.a)(e).exp<Date.now()/1e3?await n():a(!0)}),[n]);return Object(s.useEffect)((()=>{r().catch((()=>a(!1)))}),[r]),null===c?Object(u.jsx)("div",{children:"Loading..."}):c?t:Object(u.jsx)(l.b,{to:"/login"})};function S(){return localStorage.clear(),Object(u.jsx)(o.a,{to:"/login"})}function y(){return localStorage.clear(),Object(u.jsx)(g,{})}var w=function(){return Object(u.jsx)(l.a,{children:Object(u.jsxs)(o.d,{children:[Object(u.jsx)(o.b,{path:"/",element:Object(u.jsx)(N,{children:Object(u.jsx)(p,{})})}),Object(u.jsx)(o.b,{path:"/login",element:Object(u.jsx)(x,{})}),Object(u.jsx)(o.b,{path:"/logout",element:Object(u.jsx)(S,{})}),Object(u.jsx)(o.b,{path:"/register",element:Object(u.jsx)(y,{})}),Object(u.jsx)(o.b,{path:"*",element:Object(u.jsx)(f,{})})]})})};var C=e=>{e&&e instanceof Function&&c.e(3).then(c.bind(null,47)).then((t=>{let{getCLS:c,getFID:s,getFCP:a,getLCP:n,getTTFB:r}=t;c(e),s(e),a(e),n(e),r(e)}))};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(w,{})}),document.getElementById("root")),C()}},[[46,1,2]]]);
//# sourceMappingURL=main.98f4c4d0.chunk.js.map